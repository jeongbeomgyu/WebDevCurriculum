# Quest 16-B. 컨테이너

## Introduction

- 이번 퀘스트에서는 컨테이너 기술과 그 활용에 대해 알아보겠습니다.

## Topics

- 컨테이너 기술
- Docker
- docker-compose

## Resources

- [#LearnDocker](https://www.docker.com/101-tutorial)
- [Docker Tutorial for Beginners](https://docker-curriculum.com/)
- [docker-compose](https://docs.docker.com/compose/)

## Checklist

- 컨테이너는 어떻게 동작하나요? 다른 배포판을 사용할 수 있게 하는 원리가 무엇일까요?

컨테이너는 격리된 실행환경을 제공하는 가상화 기술이다. 컴테이너 안에는 애플레케이션 실행에 필요한 모든 요소가 포함되어 있다. 이러한 요소들은 이미지 형태로 묶여 있으며, 컨테이너는 이 이미지를 실행하여 격리된 실행환경을 만든다. 또한 컨테이너는 호스트 시스템과는 완전히 격리되어 있으며, 자신만의 파일 시스템, 네트워크 인터페이스, 프로세스 공간 등을 갖기 때문에 여러 개의 컨테이너를 동시에 실행할 때 각각의 컨테이너는 다른 컨테이너와 독립적으로 실행될 수 있다. 컨테이너는 Docker라는 컨테이너화 기술을 통해 호스트 운영체제와 완전히 격리된 환경에서 실행된다. Docker는 각 컨테이너를 결리된 환경에서 실행하기 위해 해당 컨테이너를 위한 파일 시스템, 네트워크, CPU, 메모리 등의 자원을 할당하기 때문에 컨테이너는 호스트 운영체제의 리눅스 커널을 공유하면서 실행되고, 동일한 호스트에서 실행되는 여러 컨테이너 간에는 같은 리눅스 커널을 고유할 수 있다. 이러한 구조로 인해, 동일한 호스트에서 실행되는 콘테이너는 호스트 운영체제의 종류와 버전과는 무관하게 동일한 실행환경을 가지게 된다.

- 도커 컨테이너에 호스트의 파일시스템이나 네트워크 포트를 연결하려면 어떻게 해야 할까요?

도너 컨테이너에서 호스트의 파일시스템이나 네트워크 포트를 연결하려면, 도커 컨테이너를 실행할 때 docker run 명령어에 -v 또는 - 옵션을 사용하여 설정해야 한다. 호스트의 파일 시스템을 컨테이너에 연결하기 위해서는 -v 옵션을 사용하여 호스트의 디렉토리를 컨테이너 내부의 디렉토리에 연결할 수 있다. 호스트의 네트워크 포트를 연결하기 위해서는 -p 옵션을 사용항 호스트의 포트와 컨테이너의 포트를 지정하여 연결할 수 있다.

- 도커 컨테이너에서 런타임에 환경변수를 주입하려면 어떻게 해야 할까요?

도커 컨테이너에서 런타임에 환경변수를 주입하려면 docker run 명령어의 -e 옵션을 사용하면 된다. 환경변수는 컨테이너 내부의 프로세스에서 사용되며, 환경 변수를 이용하면 컨테이너의 동작을 구성하거나 데이터베이스 연결 정보와 같은 중요한 정보를 안전하게 전달할 수 있다. 만약 환경변수를 여러개 주입할 경우에는 -e 옵션을 여러번 사용하면 되고, 호스트의 환경변수를 그대로 전달하려면 -e 옵션 뒤에 $변수명 형태로 환경변수를 지정하면 된다.

- 도커 컨테이너의 stdout 로그를 보려면 어떻게 해야 할까요?

도커 컨테이너의 stodut 로그를 보기 위해서는 doker logs 명령어를 사용하면 된다. -f라는 옵션을 추가하면, 로그의 출력이 종료되지 않고 계속해서 업데이트되는 실시간 로그를 확인할 수 있고, --tail 옵션을 사용하면 최근에 출력된 로그의 개수를 제한할 수 있다. -t옵션을 사용하면 로그 메세지의 시간 정보를 함께 출력할 수 있다.

- 실행중인 도커 컨테이너에 들어가 bash 등의 쉘을 실행하고 로그 등을 보려면 어떻게 해야 할까요?

실행중인 도커 컨테이너에 들어가서 bash 등의 쉘을 실행하려면 docker exec 명령어를 사용하면 된다. 옵션으로 -it을 추가하면 터미널을 대화형 모드로 실행할 수 있기 때문에 컨테이너 내부 쉘을 사용할 수 있다. 로그를 확인하려면 docker logs 명령어를 사용한다. docker exec 명령어로 쉘을 실행하면, 컨테이너 내부에서 로그를 확인할 수 있다.

## Quest

- 도커를 설치하고 그 사용법을 익혀 보세요.
- 메모장 시스템 서버를 컨테이너 기반으로 띄울 수 있게 수정해 보세요. (docker-compose는 사용하지 않습니다)
- 컨테이너를 Docker Hub에 올리고, 발급받은 학습용 AWS 계정에 EC2 인스턴스를 생성한 뒤, 해당 컨테이너를 띄워서 서비스 해 보세요.
- docker-compose를 사용하여, 이미지 빌드와 서버 업/다운을 쉽게 할 수 있도록 고쳐 보세요.

## Advanced

- 도커 외의 컨테이너 기술의 대안은 어떤 것이 있을까요?
- 맥이나 윈도우에서도 컨테이너 기술을 사용할 수 있는 원리는 무엇일까요?
