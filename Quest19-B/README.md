# Quest 19-B. 서버 아키텍쳐 패턴

## Introduction

- 이번 퀘스트에서는 현대적인 서버 아키텍쳐 패턴에 대해 익혀 보도록 하겠습니다.

## Topics

- Microservice Architecture
- Serverless Architecture
- AWS Lambda
- Service Mesh

## Resources

- [Jeff Bezos의 이메일](https://news.hada.io/topic?id=638)
- [마이크로서비스란?](https://www.redhat.com/ko/topics/microservices/what-are-microservices)
- [AWS Lambda](https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/welcome.html)
- [AWS API Gateway](https://docs.aws.amazon.com/ko_kr/apigateway/latest/developerguide/welcome.html)

## Checklist

- 마이크로서비스 아키텍쳐란 무엇일까요? 어떤 식으로 서비스를 구성할 수 있을까요? 어떤 장점을 가지고 있을까요?

마이크로서비스 아키텍처는 소프트웨어 개발 방법론으로 큰 규모의 소프트웨어 시스템을 작은 단위의 독립적인 서비스 단위로 분해하고 조합하여 하나의 시스템으로 구성하는 아키텍처이다. 마이크로서비스 아키텍쳐에서 서비스는 단일 책임을 가진 작은 서비스로 구성이 된다. 구성 방식으로 기능별 구성는 각 서비스를 특정 기능 또는 업무를 수행하는데 초점을 맞추고, 데이터별 구성은 각 서비스를 특정 유형의 데이터를 처리하는데 초점을 맞춘다. 이벤트 기반 구성은 각 서비스를 비동기 이벤트 기반 아키텍처를 기반으로 작동한고 프로토콜 기반 구성은 각 서비스를 서로 다른 프로토콜을 사용하여 통신한다. 장점으로는 작은 규모의 서비스 단위로 분리 되어 있기 때문에 개발자들이 서비스를 개별적으로 관리하고 업데이트 할 수 기 때문에 이전 버전과 화환성을 유지하기 위한 복잡한 작업을 피할 수 있는 유연성과 각 서비스가 독립적으로 확장 가능하기 때문에 전체 시스템의 확장성도 쉽게 구현할 수 있다는 장점이 있다. 또한 모든 서비스가 별도의 인프라에서 실행되기 때문에 하나의 서비스가 다운되어도 전체 시스템에 큰 영향을 미치지않아 높은 가용성을 가지고 각 서비스가 다른 기술 스택과 언어로 구현될 수 있기 때문에 개발자들이 새로운 기술과 도구를 자유롭게 사용할 수 있는 기술적 다양성이 장점이다. 추가로 팀간 협업이 용이하고 유지보수, 빠른 배포가 가능하다는 것도 장점들 중 하나이다.

- 서버리스 아키텍쳐란 무엇일까요? 어떤 식으로 서비스를 구성할 수 있을까요? 어떤 장점을 가지고 있을까요?

서버리스 아키텍쳐란 서버 인프라를 직접 관리하지 않고, 클라우드 서비스 제공 업체가 애플리케이션 실행을 위한 서버 인프라를 모두 관리하는 아키텍쳐이다. Function as a Service는 함수를 제공하는 서비스로, 애플리케이션 개발자가 코드를 업로드하고 특정 이벤트가 발생하면 해당 함수가 실행되는 방식으로 HTTP요청, 데이터베이스 변경, 메시지 큐 이벤트 등이 될 수 있다. Backend as a Service는 백엔드 기능을 제공하는 서비스로 개발자가 애플리케이션에서 필요한 백엔드 기능을 선택하고 설정하는 방식이다. API Gateway는 API를 제공하는 서비스로, 개발자가 애플리케이션의 API를 정의하고 해당 API를 호출할 수 있는 인터페이스를 제공하는 방식이다. 서버리스 아키텍처는 필요한 자원만 사용하므로 비용이 효율적이고 필요한 만큼만 자원을 사용하기 때문에 높은 확장성을 가진다는 장점이 있다. 또한 코드를 작성하고 업로드하는 것만으로 애플리케이션을 배포할 수 있기 때문에 서버 인프라를 설정하거나 관리할 필요가 없어 빠른 개발 및 배포가 가능하고, 다중 지역에 분산되어 있어 높은 가용성을 제공한다는 장점들이 있다. 추가로 코드 실행 환경이 불리 되어 있어 높은 보안성이 높고, 다양한 이벤트 소스에 대한 이벤트를 처리할 수 있다는 높은 유연성을 가지고 있다.

- AWS Lambda는 어떤 서비스일까요? 이러한 서비스는 어떤 특징을 가지고, 어디에 쓰일 수 있을까요?

AWS Lambda는 서버리스 컴퓨팅 서비스로, 코드를 실행하는 데 필요한 컴퓨팅 리소스를 제공한다. AWS Lambda의 특징인 이벤트 기반 아키텍쳐의 Lambda는 이벤트를 트리거로 실행되며, 이벤트 소스에서 발생한 이벤트를 처리하고 그 결과를 반환하고 서버리스 아키텍쳐는 개발자가 코드를 작성하고 업로드하면 AWS에서 실행환경을 제공하므로 서버 인스턴스를 직접 관리할 필요가 없다는 특징을 가지고 있다 또한 높은 확장성과 지연시간 최적화 다양한 프로그래밍 언어를 지원해주는 것도 AWS Lambda의 특징이다. AWS Lambda는 다양한 분야에서 사용될 수 있는데, 서버리스 웹 애플리케이션 개발, 데이터 처리 및 ETL 작업, 백그라운드 작업, 모바일 백엔드 서비스, IoT 이벤트 처리 등 다양한 분야에서 사용된다.

- API Gateway는 어떤 서비스인가요? 어떤 설정을 할 수 있을까요?

API Gateway는 클라이언트가 AWS 서비스, Lambda 함수, HTTP 엔드포인트, 백엔드 서비스 등과 상호작용할 수 있도록 하는 AWS의 관리형 서비스이다. API Gateway는 엔드포인트 설정, HTTP 메소드 설정, 보안 설정, 캐싱 설정, 요청 및 응답 변환 설정, 서비스 연동 설정, 모니터링 설정을 할 수 있다.

- 많은 마이크로서비스들을 복잡하게 연결할 경우 관리상에 어떤 난점이 생길 수 있을까요? 서비스 메쉬는 무엇이고 이러한 난점을 어떻게 해결하려는 시도일까요?

많은 마이크로서비스들을 복잡하게 연결하면 마이크로 서비스가 많아지고 복잡하게 연결되면 구성 및 구현이 어려워지며, 관리하기 복잡해지는 복잡성이 증가하고, 마이크로서비스들이 강하게 의존하게 되면 하나의 서비스의 장애가 다른 서비스들에 영향을 줄 수 있는 서비스 간 의존성에 대한 난점이 생겨난다. 또한 각각의 마이크로서비스들이 독립적으로 테스트와 베포가 가능하지만, 복잡하게 연결된 서비스들의 겨우 전체 시스템을 테스트하고 배포하는 것이 어려워지는 테스트 및 배포의 난점, 여러 마이크로서비스들이 각각의 데이터를 가지고 있을 때, 데이터 일관성과 무결성을 유지하는 것이 어려울 수 있다는 데이터 관리의 난점, 각각의 마이크로 서비스들이 독립적으로 보안과 인증을 처리하게 되면 중복적인 작업이 발생할 수 있고, 서비스 간의 인증이 필요한 경우 복잡하게 연결된 서비스들의 경우에 인증을 처리하는 것이 어렵다는 보안과 인증의 난점이 생긴다. 서비스 메시는 마이크로서비스 아키텍처에서 발생하는 네트워크 문제를 해결하기 위한 도구이다. 마이크로서비스 아키텍처에서는 여러개의 서비스가 분산되어 운영되고, 이 서비스들은 서로 통신하기 때문에 통신에서 발생하는 문제들은 복잡한 네트워크 구성과 분산 시스템에서의 운영 관리로 인해 해결하기 어려울 수 있고 호출이 지연되거나 실패할 경우 전체적인 시스템 성능에 영향을 미칠 수 있다. 또한 각 서비스마다 네트워크 연결과 보안 등 다양한 기능을 구현하면서 중복적인 작업을 반복할 수 있다는 난점을 해결하기 위해 서비스 메시는 마이크로서비스 간의 통신을 추상화하고, 네트워크 트래픽을 효율적으로 제어할 수 있는 기능을 제공한다. 이를 위해, 마이크로 서비스 간의 통신 흐름을 제어하는 사이드카 프록시를 사용하는데, 이는 마이크로서비스 인스턴스에 동작하며, 네트워크 트래픽을 모니터링하고 필요한 기능을 추가하며, 네트워크 오류를 감지하고 복구할 수 있다. 또한 서비스 메시는 서비스 디스커버리, 로드 밸런싱, 서비스 병목 현상 탐지, 분산 추적, 보안 등의 기능을 제공하여 마이크로서비스 아키텍처에서 발생할 수 있는 다양한 문제를 해결할 수 있다.

## Quest

- 메모장 시스템을 JWT 발급을 위한 마이크로서비스와 실제 비즈니스 로직을 처리하는 마이크로서비스로 나누어 보세요.
- JWT 토큰 발급의 역할을 하는 마이크로서비스를 AWS Lambda와 API Gateway를 이용하여 구축해 보세요.

## Advanced

- Istio는 어떤 툴일까요? 이 툴을 Kubernetes와 함께 사용하여 어떤 구조를 구현할 수 있을까요?
